<div id="carouselExampleCaptions" class="carousel slide carousel-fade" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="../asset/inclass.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5 style="text-shadow: 2px 2px 4px rgba(0,0,0,0.9);">Pembelajaran yang Menyenangkan dan Interaktif</h5>
        <p style="text-shadow: 1px 1px 3px rgba(0,0,0,0.9);">Belajar jadi lebih seru dan mudah dipahami untuk anak-anak sekolah dasar.</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="../asset/bag.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5 style="text-shadow: 2px 2px 4px rgba(0,0,0,0.9);">Materi Lengkap dan Mudah Dipahami</h5>
        <p style="text-shadow: 1px 1px 3px rgba(0,0,0,0.9);">Disusun oleh guru berpengalaman dengan bahasa yang sederhana dan visual yang menarik untuk anak-anak.</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="../asset/children.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5 style="text-shadow: 2px 2px 4px rgba(0,0,0,0.9);">Tumbuhkan Rasa Percaya Diri Anak</h5>
        <p style="text-shadow: 1px 1px 3px rgba(0,0,0,0.9);">Bantu anak menguasai pelajaran sekolah dan tampil lebih percaya diri dengan pembelajaran bertahap dan menyenangkan.</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev blur-bg" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next blur-bg" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div id="about" class="main-content" style="scroll-margin-top: 50px !important;">
  <br>
  <div style="text-align: center; " class="row justify-content-md-center">
    <div class="col-md-7">
      <h1>TENTANG KAMI</h1>
      <hr>
      <p>
        Kami berkomitmen pada desain yang bersih, keamanan data, dan kemudahan akses. Platform kami dirancang untuk memberikan pengalaman terbaik tanpa ribet.
      </p>
    </div>
  </div>
  <div class="row justify-content-md-center text-center mt-4">
    <div class="col-md-3 panel-about-us">
      <i class="bi bi-palette-fill display-4 text-primary mb-3"></i>
      <h4>CLEAN DESIGN</h4>
      <hr>
      <p>Tampilan simpel dan nyaman digunakan.</p>
    </div>
    <div class="col-md-3 panel-about-us">
      <i class="bi bi-shield-lock-fill display-4 text-primary mb-3"></i>
      <h4>SECURE DATA</h4>
      <hr>
      <p>Informasi Anda terjamin keamanannya.</p>
    </div>
    <div class="col-md-3 panel-about-us">
      <i class="bi bi-hand-index-thumb-fill display-4 text-primary mb-3"></i>
      <h4>EASY ACCESS</h4>
      <hr>
      <p>Buka kapan saja, di mana saja.</p>
    </div>
  </div>
  <div>
    <div class="container-fluid featured-courses">
      <section id="whychooseus" class="py-5 bg-light">
        <div class="container">
          <div id="pembungkus" class="row">
            <div id="gambar-kiri" class="col-md-6 mb-4 mb-md-0 d-flex">
              <img class="img-fluid rounded shadow-sm" src="../asset/foto.jpeg" alt="Kenapa Memilih Kami" style="object-fit: cover; width: 100%; height: 100%;">
            </div>
            <div id="misi-contents" class="col-md-6 d-flex flex-column justify-content-center">
              <div class="ps-md-4">
                <div class="mb-4">
                  <h2 class="fw-bold display-5 mb-3">Kenapa Memilih <span class="text-primary">Kami</span></h2>
                  <h4 class="fw-semibold text-secondary">Lihat Apa Misi Kami</h4>
                </div>
                <div class="misi-item d-flex mb-4">
                  <div class="misi-number-bg me-3"><span class="misi-number">01</span></div>
                  <div class="misi-text"><h5 class="fw-semibold mb-1"><i class="bi bi-lightbulb-fill text-warning me-2"></i>Membantu Anak Belajar Lebih Mudah</h5><p class="text-muted small">Minds Up ingin membuat anak-anak lebih mudah memahami pelajaran dengan cara yang simpel dan tidak membingungkan. Materinya dibuat ringan dan jelas supaya anak tidak merasa sulit saat belajar.</p></div>
                </div>
                <div class="misi-item d-flex mb-4">
                  <div class="misi-number-bg me-3"><span class="misi-number">02</span></div>
                  <div class="misi-text"><h5 class="fw-semibold mb-1"><i class="bi bi-emoji-smile-fill text-success me-2"></i>Belajar dengan Cara yang Menyenangkan</h5><p class="text-muted small">Supaya anak tidak cepat bosan, Minds Up berusaha membuat pembelajaran lebih seru, misalnya dengan gambar menarik, video menarik, atau latihan yang tidak terlalu berat.</p></div>
                </div>
                <div class="misi-item d-flex mb-4">
                  <div class="misi-number-bg me-3"><span class="misi-number">03</span></div>
                  <div class="misi-text"><h5 class="fw-semibold mb-1"><i class="bi bi-person-check-fill text-info me-2"></i>Membantu Anak Lebih Percaya Diri</h5><p class="text-muted small">Minds Up ingin membuat anak lebih percaya diri saat belajar. Materi disusun agar mudah dimengerti, dan ada latihan ringan supaya mereka bisa mencoba sendiri tanpa takut salah.</p></div>
                </div>
                <div class="misi-item d-flex">
                  <div class="misi-number-bg me-3"><span class="misi-number">04</span></div>
                  <div class="misi-text"><h5 class="fw-semibold mb-1"><i class="bi bi-journal-text text-danger me-2"></i>Menyediakan Materi yang Mudah Dipahami</h5><p class="text-muted small">Materi di Minds Up dibuat dengan bahasa yang sederhana dan contoh yang jelas. Anak-anak bisa membaca dan belajar tanpa perlu merasa kesulitan memahami isi pelajaran.</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <div class="container-fluid featured-courses py-5">
    <div class="container">
      <div style="text-align: center;" class="row justify-content-md-center">
        <div class="col-md-9">
          <h1>POPULAR COURSES</h1>
          <hr>
          <p>
            Raih Prestasi dengan Kelas Favorit <br />Temukan program unggulan kami yang dirancang untuk membuat belajar menyenangkan dan efektif!
          </p>
        </div>
      </div>

      <div class="row justify-content-center">
        <?php
          if (session_status() == PHP_SESSION_NONE) {
              session_start();
          }
          require '../komponen/koneksi.php';

          // Mengambil data 3 kursus teratas
          $stmt_kursus = mysqli_prepare($conn, "SELECT id_kursus, judul, deskripsi, gambar, harga FROM kursus ORDER BY id_kursus DESC LIMIT 3");
          mysqli_stmt_execute($stmt_kursus);
          $result_kursus = mysqli_stmt_get_result($stmt_kursus);

          if (mysqli_num_rows($result_kursus) > 0) {
            while ($kursus = mysqli_fetch_assoc($result_kursus)) {
              echo '<div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch">';
              echo '  <div class="card panel-course w-100 shadow-sm">';
              
              // Logika untuk menampilkan gambar dengan benar
              $final_image_src = '../asset/placeholder_image.png';
              if (!empty($kursus['gambar'])) {
                  $path_bersih = str_replace('../', '', $kursus['gambar']);
                  $path_untuk_html = '../' . $path_bersih;
                  $path_untuk_cek = realpath(__DIR__ . '/..') . '/' . $path_bersih;
                  if (file_exists($path_untuk_cek)) {
                      $final_image_src = $path_untuk_html;
                  }
              }
              
              echo '    <img src="' . htmlspecialchars($final_image_src) . '" class="card-img-top" alt="Course Cover" style="height: 200px; object-fit: cover;">';
              echo '    <div class="card-body d-flex flex-column">';
              echo '      <h5 class="card-title fw-bold">' . htmlspecialchars($kursus['judul']) . '</h5>';
              echo '      <p class="card-text small text-muted flex-grow-1">' . substr(htmlspecialchars($kursus['deskripsi']), 0, 100) . '...</p>';
              
              // === PERUBAHAN UTAMA PADA BAGIAN TOMBOL ===
              echo '      <div class="mt-auto d-flex justify-content-between align-items-center">';
              
              // 1. Tombol "Lihat Detail" dibuat aktif
              echo '        <a href="../courses/detail_kursus.php?id=' . $kursus['id_kursus'] . '" class="btn btn-sm btn-outline-primary">Lihat Detail <i class="bi bi-arrow-right-short"></i></a>';
              
              // 2. Tombol Keranjang ditambahkan (hanya muncul untuk role siswa)
              if (isset($_SESSION['role']) && $_SESSION['role'] === 'siswa') {
                  echo '    <form action="../keranjang_aksi.php" method="POST" class="m-0">';
                  echo '      <input type="hidden" name="id_kursus" value="' . $kursus['id_kursus'] . '">';
                  echo '      <input type="hidden" name="nama_kursus" value="' . htmlspecialchars($kursus['judul']) . '">';
                  echo '      <input type="hidden" name="harga_kursus" value="' . floatval($kursus['harga']) . '">';
                  echo '      <input type="hidden" name="gambar_kursus" value="' . htmlspecialchars($kursus['gambar']) . '">';
                  echo '      <input type="hidden" name="action" value="tambah">';
                  echo '      <button type="submit" class="btn btn-sm btn-success" title="Tambah ke Keranjang"><i class="bi bi-cart-plus-fill"></i></button>';
                  echo '    </form>';
              }
              
              echo '      </div>'; // Penutup div tombol-tombol
              echo '    </div>'; // Penutup card-body
              echo '  </div>'; // Penutup card
              echo '</div>'; // Penutup col
            }
          } else {
            echo '<h3 class="text-center text-muted mt-4">Belum ada kursus untuk ditampilkan.</h3>';
          }
        ?>
      </div>
    </div>
  </div>

  <div class="container quote-section">
    <p>"Invest in your knowledge—it yields the best returns for tomorrow."</p>
    <p>— Benjamin Franklin</p>
  </div>
</div>

<?php
  require 'komponen/footer.php';
?>